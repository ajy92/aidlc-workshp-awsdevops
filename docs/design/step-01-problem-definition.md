# Step 1: 문제 정의 및 도메인 탐색

> 방법론: First Principles, 5 Whys
> 상태: 완료

---

## 1. 5 Whys 분석

| # | Why | 답변 |
|---|-----|------|
| 1 | 왜 테이블오더 시스템이 필요한가? | 고객이 직원 호출 없이 즉시 주문하고, 매장이 효율적으로 운영되려면 디지털 주문 채널이 필요하다 |
| 2 | 왜 직원 호출 방식이 문제인가? | 피크타임에 대기 시간 발생, 주문 누락/오류, 인건비 상승으로 매장 수익성이 하락한다 |
| 3 | 왜 대기 시간과 주문 오류가 발생하는가? | 사람 의존적 프로세스에서 동시 다수 테이블 처리가 물리적으로 불가능하기 때문이다 |
| 4 | 왜 기존 솔루션으로 해결하지 못하는가? | 기존 POS 연동형 솔루션은 비용이 높고, 매장별 커스터마이징이 어려우며, 독립 운영이 불가능하다 |
| 5 | **근본 원인** | 소규모 매장이 합리적 비용으로 도입 가능한, 독립적이고 유연한 디지털 주문 시스템이 시장에 부재하다 |

---

## 2. 문제 정의서 (Problem Statement)

### 배경
외식업 매장에서 고객 주문 프로세스는 여전히 직원 의존적이다. 피크타임 대기, 주문 오류, 인건비 증가 등의 문제가 반복되고 있으나, 기존 POS 연동형 솔루션은 도입 비용이 높고 유연성이 부족하다.

### 핵심 문제
소규모~중규모 매장이 **합리적 비용으로 독립 운영 가능한 디지털 주문 시스템**이 부재하다.

### Problem Statement
> **매장 고객**은 **피크타임에 직원을 호출하고 대기하는 비효율**을 겪고 있다.
> 이로 인해 **고객 만족도 하락과 매장 회전율 저하**가 발생한다.
> **테이블 태블릿 기반 셀프 주문 시스템**을 통해 **즉시 주문과 실시간 운영 관리**를 달성한다.

### 대상 사용자

| 사용자 유형 | 특성 | 핵심 니즈 | 고충 |
|------------|------|----------|------|
| 매장 고객 | 테이블에 앉은 식사 고객, 다양한 연령층 | 대기 없는 즉시 주문, 직관적 UI | 직원 호출 대기, 주문 오류 |
| 매장 운영자 | 소규모 매장 사장/매니저, IT 비전문가 | 실시간 주문 파악, 효율적 테이블 관리 | 동시 다수 주문 처리, 주문 누락 |

### 성공 기준
1. 고객이 착석 후 30초 이내에 메뉴 탐색 시작 가능 (자동 로그인)
2. 주문 생성 후 2초 이내에 관리자 대시보드에 표시 (SSE)
3. 관리자가 1개 화면에서 전체 테이블 주문 현황 파악 가능
4. 테이블 세션 관리(시작/종료)로 주문 이력 격리 보장

### 범위

**In-Scope (MVP)**:
- 고객: 자동 로그인, 메뉴 조회(다국어 한/영 전환), 장바구니, 주문 생성, 주문 내역 조회
- 관리자: 매장 인증, 실시간 주문 모니터링(SSE), 테이블 관리, 메뉴 CRUD(한/영 메뉴명, 판매 상태 관리)

**Out-of-Scope**:
- 결제/PG 연동, 영수증
- OAuth/2FA 인증
- 이미지 업로드/최적화
- 푸시/SMS/이메일 알림
- 주방 디스플레이, 재고 관리
- 배달 플랫폼/POS 연동
- 분석/리포트

### 가정 및 제약
- **가정**: 태블릿 기기에 안정적인 Wi-Fi 연결이 보장됨
- **가정**: 매장당 테이블 수는 최대 50개 수준
- **가정**: 동시 주문 처리량은 매장당 최대 100건/시간
- **제약**: 브라우저 기반 웹 UI (네이티브 앱 아님)
- **제약**: 단일 매장 운영 (멀티 테넌트 아님, MVP 기준)

---

## 3. 도메인 분류 (Domain Map)

### Core Domain (경쟁 우위)
- **주문 관리 (Order Management)**: 장바구니 → 주문 생성 → 상태 추적의 핵심 흐름. 실시간 SSE 기반 주문 모니터링이 차별화 포인트
- **테이블 세션 관리 (Table Session)**: 테이블별 세션 라이프사이클 (시작 → 주문 → 이용완료), 세션 기반 주문 격리로 고객 경험 보장

### Supporting Domain (지원)
- **메뉴 관리 (Menu Management)**: CRUD, 카테고리 분류, 노출 순서 조정
- **매장 관리 (Store Management)**: 매장 정보, 테이블 초기 설정, 매장 인증

### Generic Domain (범용)
- **인증/인가 (Authentication)**: 관리자 JWT 인증(16시간), 테이블 태블릿 자동 로그인
- **공통 인프라 (Infrastructure)**: 에러 처리, 로깅, API 공통 응답 형식

---

## 4. 도메인 용어 사전 (Ubiquitous Language)

| 용어 | 정의 | 동의어 | 구분 | 예시 |
|------|------|--------|------|------|
| 테이블 세션 | 특정 테이블에서 첫 주문부터 이용완료까지의 논리적 단위 | 식사 세션 | ≠ HTTP 세션, ≠ 로그인 세션 | 3번 테이블 14:00~15:30 세션 |
| 이용완료 | 관리자가 테이블 세션을 종료하는 행위. 주문이력이 과거로 이동됨 | 테이블 리셋, 퇴석 처리 | ≠ 주문 완료 | 3번 테이블 이용완료 처리 |
| 주문(Order) | 고객이 장바구니의 메뉴를 확정하여 매장에 전달한 건 | 오더 | ≠ 장바구니 (미확정) | 주문#1234: 치킨x2, 맥주x3 |
| 장바구니(Cart) | 주문 전 메뉴를 임시 저장하는 클라이언트측 저장소 | 담기 목록 | ≠ 주문 (서버 미전송) | 장바구니에 파스타 1개 추가 |
| 주문 상태 | 주문의 처리 단계: 대기중 → 준비중 → 완료 | 오더 스테이터스 | 3단계 고정 | 주문#1234 → 준비중 |
| 매장 식별자 | 매장을 고유하게 식별하는 값 | Store ID | ≠ 매장명 | store_abc123 |
| 테이블 비밀번호 | 테이블 태블릿 자동 로그인에 사용되는 인증 정보 | 테이블 PIN | ≠ 관리자 비밀번호 | 초기설정 시 관리자가 지정 |
| 과거 내역 | 이용완료 처리된 세션의 주문 기록 | 주문 이력, Order History | ≠ 현재 세션 주문 | 어제 3번 테이블 주문 3건 |
| SSE | Server-Sent Events. 서버→클라이언트 단방향 실시간 데이터 스트리밍 프로토콜 | 서버 푸시 | ≠ WebSocket (양방향) | 신규 주문 실시간 알림 |
| 카테고리 | 메뉴를 분류하는 그룹 | 메뉴 분류 | 계층 없음 (1단계) | 메인, 사이드, 음료, 디저트 |
| 주문 항목 | 주문 내 개별 메뉴와 수량의 조합 | Order Item, 주문 아이템 | ≠ 메뉴 (마스터 데이터) | 치킨버거 x 2 |
| 메뉴 상태 | 메뉴의 판매 가능 여부: 판매중 / 품절 | 판매 상태 | ≠ 주문 상태 | 김치찌개 → 품절 |
| 담기 | 고객이 메뉴를 장바구니에 추가하는 행위 | Add to Cart | ≠ 주문 (확정 아님) | "담기" 버튼 클릭 |
| 메뉴 영문명 | 메뉴의 영어 명칭. 다국어 지원에 사용 | English Name | ≠ 메뉴명 (한글 기본) | Rolled Omelette, Kimchi Stew |

---

## 5. UI 참고 화면 분석

> 참고 이미지: 고객 화면(왼쪽) + 관리자 화면(오른쪽) 스크린샷

### 고객 화면 구조
- **헤더**: "테이블오더" 타이틀 + 언어 토글 (한국어/English)
- **카테고리 탭**: 전체 | 메인 요리 | 사이드 | 음료 (필터 형태)
- **메뉴 카드**: 2열 그리드, 각 카드에 메뉴명 + 설명 + 가격(₩) + "담기" 버튼
- **하단 네비게이션**: 메뉴 / 장바구니(아이템 수 뱃지) / 주문내역

### 관리자 화면 구조
- **상단 탭 네비게이션**: 대시보드 | 메뉴 관리
- **메뉴 테이블**: 메뉴명(한/영) | 카테고리 | 가격 | 상태(판매중 뱃지) | 액션(수정/삭제)
- **추가 버튼**: 우측 상단 파란색 CTA

### UI에서 발견된 추가 요구사항
1. **다국어 지원**: 고객 화면에서 한국어/English 전환 가능
2. **메뉴 영문명**: 관리자가 한글명 + 영문명 함께 관리
3. **메뉴 상태**: "판매중" 뱃지 → 품절 등 상태 전환 기능 존재
4. **카테고리**: 메인 요리 / 사이드 / 음료 (3개 카테고리 확인)

---

## 6. 핵심 질문 체크리스트

- [x] 이 시스템 없이 비즈니스가 운영될 수 있는가? → 가능하지만 직원 의존적이고 비효율적
- [x] 현재 이 문제를 어떻게 해결하고 있는가? → 직원 호출 또는 벨 시스템
- [x] 이 문제를 해결하지 않으면 6개월 후? → 인건비 지속 상승, 경쟁 매장 대비 고객 경험 열위
- [x] 가장 중요한 사용자 그룹? → 매장 고객 (주문 경험) + 매장 운영자 (운영 효율)
- [x] 성공 측정 지표? → 주문 처리 시간, 실시간 알림 지연, 테이블 관리 효율
- [x] 타협 불가 요구사항? → 실시간 주문 알림(SSE), 테이블 세션 격리
- [x] 최대 리스크? → SSE 연결 안정성, 동시 다수 주문 처리 성능

---

## 7. 다음 단계

이 산출물은 **Step 2: 요구사항 엔지니어링 (FR/NFR & SLO)**의 입력으로 전달됩니다.
- 문제 정의서 → 기능 요구사항 도출의 기반
- 도메인 용어 사전 → 전체 설계 과정에서 일관된 언어 사용
- 도메인 맵 → 아키텍처 경계 설정의 기초
