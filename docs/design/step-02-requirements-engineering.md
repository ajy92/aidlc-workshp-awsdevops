# Step 2: 요구사항 엔지니어링 (FR/NFR & SLO)

> 방법론: User Stories, MoSCoW, SLO/SLI
> 상태: 완료

---

## 1. 기능 요구사항 (Functional Requirements)

### 1.1 사용자 스토리 & 인수 조건

#### 고객용 (Customer)

##### FR-C-001: 테이블 태블릿 자동 로그인
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 고객, I want to 테이블에 앉으면 별도 로그인 없이 메뉴를 볼 수 있기를, so that 대기 없이 즉시 주문할 수 있다.
- **인수 조건**:
  - AC-1: Given 관리자가 테이블 초기 설정을 완료한 상태, When 태블릿 브라우저를 열면, Then 저장된 인증 정보로 자동 로그인되어 메뉴 화면이 표시된다
  - AC-2: Given 자동 로그인 정보가 없는 상태, When 태블릿 브라우저를 열면, Then 매장 식별자/테이블 번호/비밀번호 입력 화면이 표시된다
  - AC-3: Given 로그인 성공 시, When 인증 정보를 로컬에 저장하면, Then 이후 브라우저 재시작 시에도 자동 로그인된다
- **관련 도메인**: Generic (인증/인가)
- **의존성**: 없음

##### FR-C-002: 메뉴 조회 및 탐색
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 고객, I want to 카테고리별로 메뉴를 탐색하기를, so that 원하는 메뉴를 빠르게 찾아 선택할 수 있다.
- **인수 조건**:
  - AC-1: Given 로그인된 상태, When 메뉴 화면에 진입하면, Then 전체 카테고리의 메뉴가 카드 형태로 표시된다 (메뉴명, 설명, 가격, 담기 버튼)
  - AC-2: Given 메뉴 목록이 표시된 상태, When 카테고리 탭을 선택하면, Then 해당 카테고리의 메뉴만 필터링되어 표시된다
  - AC-3: Given 품절된 메뉴가 있을 때, When 메뉴 목록을 조회하면, Then 품절 메뉴는 "품절" 표시와 함께 담기 버튼이 비활성화된다
- **관련 도메인**: Supporting (메뉴 관리)
- **의존성**: FR-C-001

##### FR-C-003: 장바구니 관리
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 고객, I want to 주문 전 선택한 메뉴를 장바구니에서 확인하고 수정하기를, so that 최종 주문 전에 내용을 점검할 수 있다.
- **인수 조건**:
  - AC-1: Given 메뉴 화면에서 "담기" 버튼을 클릭하면, When 해당 메뉴가 장바구니에 추가되면, Then 하단 네비게이션의 장바구니 아이콘에 아이템 수 뱃지가 업데이트된다
  - AC-2: Given 장바구니에 메뉴가 있는 상태, When 수량 증가/감소 버튼을 클릭하면, Then 수량과 총 금액이 즉시 재계산된다
  - AC-3: Given 장바구니에 메뉴가 있는 상태, When 페이지를 새로고침하면, Then 장바구니 내용이 유지된다 (로컬 스토리지)
  - AC-4: Given 장바구니에서 수량을 0으로 줄이면, When 해당 메뉴가 삭제되면, Then 장바구니 목록에서 제거된다
- **관련 도메인**: Core (주문 관리)
- **의존성**: FR-C-002

##### FR-C-004: 주문 생성
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 고객, I want to 장바구니의 메뉴를 주문하기를, so that 매장에서 음식을 받을 수 있다.
- **인수 조건**:
  - AC-1: Given 장바구니에 1개 이상 메뉴가 있는 상태, When "주문하기" 버튼을 클릭하면, Then 주문 내역 확인 화면이 표시된다
  - AC-2: Given 주문 확인 화면에서 "주문 확정" 클릭, When 서버에 주문이 성공적으로 생성되면, Then 주문 번호가 표시되고, 5초 후 메뉴 화면으로 자동 리다이렉트되며, 장바구니가 비워진다
  - AC-3: Given 주문 확정 클릭, When 서버 오류로 주문 생성 실패 시, Then 에러 메시지가 표시되고 장바구니 내용은 유지된다
  - AC-4: Given 주문 성공 시, When 주문 데이터가 서버에 저장되면, Then 매장 식별자, 테이블 번호, 세션 ID, 메뉴 목록(메뉴명/수량/단가), 총 금액이 포함된다
- **관련 도메인**: Core (주문 관리)
- **의존성**: FR-C-003

##### FR-C-005: 주문 내역 조회
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 고객, I want to 현재 세션의 주문 내역을 확인하기를, so that 내가 주문한 내용과 상태를 파악할 수 있다.
- **인수 조건**:
  - AC-1: Given 하단 네비게이션에서 "주문내역"을 클릭하면, When 현재 테이블 세션의 주문 목록이 표시되면, Then 주문 번호, 시각, 메뉴/수량, 금액, 상태(대기중/준비중/완료)가 보인다
  - AC-2: Given 이전 세션(이용완료 처리됨)의 주문이 있을 때, When 주문내역을 조회하면, Then 현재 세션의 주문만 표시되고 이전 세션 주문은 보이지 않는다
  - AC-3: Given 주문 내역이 표시된 상태, When 관리자가 주문 상태를 변경하면, Then 고객 화면의 주문 상태도 업데이트된다
- **관련 도메인**: Core (주문 관리)
- **의존성**: FR-C-004

##### FR-C-006: 다국어 전환 (한/영)
- **우선순위**: Should Have
- **사용자 스토리**: As a 외국인 고객, I want to 메뉴를 영어로 볼 수 있기를, so that 메뉴 내용을 이해하고 주문할 수 있다.
- **인수 조건**:
  - AC-1: Given 고객 화면 헤더에 언어 토글이 있을 때, When "English"를 선택하면, Then 메뉴명이 영문명으로 전환되어 표시된다
  - AC-2: Given 영어 모드에서 영문명이 없는 메뉴가 있을 때, When 메뉴를 표시하면, Then 한글 메뉴명이 대신 표시된다
- **관련 도메인**: Supporting (메뉴 관리)
- **의존성**: FR-C-002

---

#### 관리자용 (Admin)

##### FR-A-001: 매장 관리자 인증
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 매장 관리 시스템에 안전하게 로그인하기를, so that 매장 주문 및 메뉴를 관리할 수 있다.
- **인수 조건**:
  - AC-1: Given 관리자 로그인 화면에서 매장 식별자/사용자명/비밀번호를 입력하고, When 인증이 성공하면, Then JWT 토큰이 발급되어 16시간 동안 세션이 유지된다
  - AC-2: Given 로그인 상태에서 브라우저를 새로고침하면, When 저장된 JWT 토큰이 유효하면, Then 세션이 유지된다
  - AC-3: Given JWT 토큰이 만료된 상태, When 관리 페이지에 접근하면, Then 로그인 화면으로 리다이렉트된다
- **관련 도메인**: Generic (인증/인가)
- **의존성**: 없음

##### FR-A-002: 실시간 주문 모니터링 (SSE)
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 새로운 주문을 실시간으로 확인하기를, so that 즉시 주문 처리를 시작할 수 있다.
- **인수 조건**:
  - AC-1: Given 관리자 대시보드에 접속한 상태, When 고객이 새로운 주문을 생성하면, Then 2초 이내에 대시보드에 해당 주문이 표시된다 (SSE)
  - AC-2: Given 대시보드에 주문 목록이 그리드 형태로 표시될 때, When 각 테이블 카드를 보면, Then 테이블 번호, 총 주문액, 최신 주문 미리보기가 표시된다
  - AC-3: Given 신규 주문이 도착했을 때, When 대시보드에 표시되면, Then 시각적 강조(색상/애니메이션)로 구분된다
  - AC-4: Given 테이블 카드를 클릭하면, When 상세 보기가 열리면, Then 해당 테이블의 전체 주문 메뉴 목록이 표시된다
- **관련 도메인**: Core (주문 관리)
- **의존성**: FR-A-001

##### FR-A-003: 주문 상태 변경
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 주문 상태를 변경하기를, so that 고객에게 주문 처리 현황을 알릴 수 있다.
- **인수 조건**:
  - AC-1: Given 대시보드에서 주문을 선택한 상태, When 상태를 "대기중 → 준비중"으로 변경하면, Then 상태가 즉시 업데이트되고 고객 화면에도 반영된다
  - AC-2: Given 주문 상태 변경 시, When 상태 전이는 "대기중 → 준비중 → 완료" 순서만 가능하며, Then 역방향 전이는 불가하다
- **관련 도메인**: Core (주문 관리)
- **의존성**: FR-A-002

##### FR-A-004: 주문 삭제 (직권)
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 잘못된 주문을 삭제하기를, so that 정확한 주문 현황을 유지할 수 있다.
- **인수 조건**:
  - AC-1: Given 대시보드에서 특정 주문의 삭제 버튼을 클릭하면, When 확인 팝업이 표시되고 "확인"을 클릭하면, Then 주문이 삭제되고 테이블 총 주문액이 재계산된다
  - AC-2: Given 주문 삭제 후, When 고객 주문내역 화면을 조회하면, Then 삭제된 주문은 표시되지 않는다
- **관련 도메인**: Core (주문 관리)
- **의존성**: FR-A-002

##### FR-A-005: 테이블 세션 관리
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 테이블 세션을 관리(시작/종료)하기를, so that 새 고객이 이전 고객의 주문 없이 깨끗한 상태로 시작할 수 있다.
- **인수 조건**:
  - AC-1: Given 테이블에 첫 주문이 생성되면, When 세션이 자동으로 시작되면, Then 새로운 세션 ID가 부여된다
  - AC-2: Given 테이블 카드에서 "이용완료" 버튼을 클릭하면, When 확인 팝업에서 "확인"을 클릭하면, Then 해당 세션의 주문이 과거 이력으로 이동하고, 테이블 현재 주문/총액이 0으로 리셋된다
  - AC-3: Given 이용완료 처리 후, When 같은 테이블에서 새 주문이 들어오면, Then 새로운 세션으로 시작된다
- **관련 도메인**: Core (테이블 세션 관리)
- **의존성**: FR-A-002

##### FR-A-006: 과거 주문 내역 조회
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 과거 테이블 세션의 주문 기록을 조회하기를, so that 매출 현황을 파악할 수 있다.
- **인수 조건**:
  - AC-1: Given 테이블 카드에서 "과거 내역" 버튼을 클릭하면, When 과거 주문 목록이 표시되면, Then 시간 역순으로 주문 번호/시각/메뉴 목록/총 금액/이용완료 시각이 표시된다
  - AC-2: Given 과거 내역 조회 시, When 날짜 필터를 적용하면, Then 해당 날짜 범위의 주문만 표시된다
  - AC-3: Given 과거 내역 화면에서 "닫기" 버튼을 클릭하면, When 화면이 닫히면, Then 대시보드로 복귀한다
- **관련 도메인**: Supporting (매장 관리)
- **의존성**: FR-A-005

##### FR-A-007: 메뉴 CRUD
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 메뉴를 등록/수정/삭제하기를, so that 매장 메뉴를 최신 상태로 유지할 수 있다.
- **인수 조건**:
  - AC-1: Given 메뉴 관리 화면에서 "추가" 버튼을 클릭하면, When 메뉴 등록 폼이 표시되면, Then 메뉴명(한/영), 가격, 설명, 카테고리, 이미지 URL을 입력할 수 있다
  - AC-2: Given 필수 필드(메뉴명, 가격, 카테고리)를 미입력 시, When 저장을 시도하면, Then 검증 에러 메시지가 표시된다
  - AC-3: Given 메뉴 목록에서 "수정" 버튼을 클릭하면, When 수정 폼이 표시되면, Then 기존 데이터가 채워진 상태로 수정 가능하다
  - AC-4: Given 메뉴 목록에서 "삭제" 버튼을 클릭하면, When 확인 팝업에서 "확인"을 클릭하면, Then 메뉴가 삭제된다
- **관련 도메인**: Supporting (메뉴 관리)
- **의존성**: FR-A-001

##### FR-A-008: 메뉴 판매 상태 관리
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 메뉴의 판매 상태를 변경하기를, so that 품절된 메뉴를 고객에게 노출하지 않을 수 있다.
- **인수 조건**:
  - AC-1: Given 메뉴 관리 화면에서 메뉴 상태를 "품절"로 변경하면, When 고객 화면에서 해당 메뉴를 조회하면, Then "품절" 표시와 함께 담기 버튼이 비활성화된다
  - AC-2: Given 메뉴 상태를 "판매중"으로 변경하면, When 고객 화면에서 조회하면, Then 정상적으로 담기 가능하다
- **관련 도메인**: Supporting (메뉴 관리)
- **의존성**: FR-A-007

##### FR-A-009: 테이블 초기 설정
- **우선순위**: Must Have
- **사용자 스토리**: As a 매장 운영자, I want to 테이블 태블릿을 초기 설정하기를, so that 고객이 해당 테이블에서 자동 로그인 후 주문할 수 있다.
- **인수 조건**:
  - AC-1: Given 태블릿의 초기 설정 화면에서 매장 식별자/테이블 번호/비밀번호를 입력하면, When 인증이 성공하면, Then 태블릿에 로그인 정보가 저장되고 메뉴 화면으로 이동한다
  - AC-2: Given 잘못된 인증 정보를 입력하면, When 인증이 실패하면, Then 에러 메시지가 표시된다
- **관련 도메인**: Supporting (매장 관리)
- **의존성**: FR-A-001

---

### 1.2 기능 우선순위 매트릭스 (MoSCoW)

| 우선순위 | ID | 기능 | 근거 |
|----------|-----|------|------|
| **Must Have** | FR-C-001 | 테이블 자동 로그인 | 고객 진입점, 없으면 서비스 사용 불가 |
| **Must Have** | FR-C-002 | 메뉴 조회 | 핵심 사용자 여정의 시작 |
| **Must Have** | FR-C-003 | 장바구니 관리 | 주문 전 필수 단계 |
| **Must Have** | FR-C-004 | 주문 생성 | 서비스의 핵심 가치 |
| **Must Have** | FR-C-005 | 주문 내역 조회 | 고객 경험 핵심 |
| **Must Have** | FR-A-001 | 매장 인증 | 관리자 진입점 |
| **Must Have** | FR-A-002 | 실시간 주문 모니터링 | 핵심 차별화 기능 (SSE) |
| **Must Have** | FR-A-003 | 주문 상태 변경 | 주문 처리 필수 |
| **Must Have** | FR-A-004 | 주문 삭제 | 운영 필수 기능 |
| **Must Have** | FR-A-005 | 테이블 세션 관리 | 고객 격리 필수 |
| **Must Have** | FR-A-006 | 과거 내역 조회 | 운영 이력 관리 |
| **Must Have** | FR-A-007 | 메뉴 CRUD | 매장 운영 기본 |
| **Must Have** | FR-A-008 | 메뉴 판매 상태 | 품절 관리 필수 |
| **Must Have** | FR-A-009 | 테이블 초기 설정 | 테이블 인증 필수 |
| **Should Have** | FR-C-006 | 다국어 전환 (한/영) | UI 참고 화면에 존재, 차별화 |
| **Won't Have** | - | 결제/PG 연동 | MVP 범위 외 (constraints.md) |
| **Won't Have** | - | 푸시/SMS/이메일 알림 | MVP 범위 외 |
| **Won't Have** | - | 주방 디스플레이/재고 관리 | MVP 범위 외 |
| **Won't Have** | - | 배달 플랫폼/POS 연동 | MVP 범위 외 |
| **Won't Have** | - | 분석/리포트/매출 대시보드 | MVP 범위 외 |

---

### 1.3 유스케이스 다이어그램 (ASCII)

```
                    ┌─────────────────────────────────────────────┐
                    │           테이블오더 시스템                    │
                    │                                             │
  ┌──────┐          │  ┌──────────────┐    ┌─────────────────┐    │
  │      │──────────┼─>│ 자동 로그인   │    │ 매장 인증        │<───┼──────┐
  │      │          │  └──────────────┘    └─────────────────┘    │      │
  │      │          │  ┌──────────────┐    ┌─────────────────┐    │      │
  │ 고객  │──────────┼─>│ 메뉴 조회    │    │ 실시간 주문 모니터│<───┼──┐   │
  │      │          │  └──────────────┘    └─────────────────┘    │  │   │
  │      │          │  ┌──────────────┐    ┌─────────────────┐    │  │   │
  │      │──────────┼─>│ 장바구니 관리  │    │ 주문 상태 변경   │<───┼──┤   │
  │      │          │  └──────────────┘    └─────────────────┘    │  │   │
  │      │          │  ┌──────────────┐    ┌─────────────────┐    │  │ ┌─┴────┐
  │      │──────────┼─>│ 주문 생성    │    │ 주문 삭제        │<───┼──┤      │
  │      │          │  └──────────────┘    └─────────────────┘    │  │ 관리자│
  │      │          │  ┌──────────────┐    ┌─────────────────┐    │  │      │
  │      │──────────┼─>│ 주문내역 조회  │    │ 테이블 세션 관리  │<───┼──┤      │
  │      │          │  └──────────────┘    └─────────────────┘    │  │      │
  │      │          │  ┌──────────────┐    ┌─────────────────┐    │  │      │
  │      │──────────┼─>│ 다국어 전환   │    │ 메뉴 CRUD       │<───┼──┤      │
  └──────┘          │  └──────────────┘    └─────────────────┘    │  │      │
                    │                      ┌─────────────────┐    │  │      │
                    │                      │ 과거 내역 조회   │<───┼──┤      │
                    │                      └─────────────────┘    │  │      │
                    │                      ┌─────────────────┐    │  │      │
                    │                      │ 테이블 초기 설정  │<───┼──┘      │
                    │                      └─────────────────┘    │  └──────┘
                    └─────────────────────────────────────────────┘
```

---

## 2. 비기능 요구사항 (Non-Functional Requirements)

### 2.1 성능 (Performance)

| ID | 지표 | 목표치 | 근거 |
|----|------|--------|------|
| NFR-PERF-001 | API 응답 시간 (일반) | p50 < 100ms, p99 < 500ms | 메뉴 조회, 주문 내역 등 일반 CRUD |
| NFR-PERF-002 | 주문 생성 응답 시간 | p50 < 200ms, p99 < 1000ms | 트랜잭션 포함, 세션 검증 필요 |
| NFR-PERF-003 | SSE 주문 알림 지연 | < 2초 | 요구사항 명시: "2초 이내 주문 표시" |
| NFR-PERF-004 | 동시 사용자 (CCU) | 매장당 50 CCU | 가정: 매장당 최대 50테이블, 관리자 포함 |
| NFR-PERF-005 | 처리량 | 매장당 100 주문/시간 | Step 1 가정: 동시 주문 처리량 최대 100건/시간 |
| NFR-PERF-006 | 페이지 로드 시간 | First Contentful Paint < 2초 | 고객 착석 후 30초 이내 메뉴 탐색 시작 기준 |

### 2.2 가용성 (Availability)

| ID | 지표 | 목표치 | 근거 |
|----|------|--------|------|
| NFR-AVAIL-001 | 업타임 | 99.5% (월 3.6시간 다운타임 허용) | 단일 매장 MVP, 영업시간 중심 운영 |
| NFR-AVAIL-002 | RTO (복구 목표 시간) | 30분 | 매장 운영 시간 내 빠른 복구 필요 |
| NFR-AVAIL-003 | RPO (데이터 손실 허용) | 5분 | 주문 데이터 손실 최소화 |
| NFR-AVAIL-004 | SSE 연결 복구 | 자동 재연결 5초 이내 | 실시간 알림의 연속성 보장 |

### 2.3 확장성 (Scalability)

| ID | 지표 | 목표치 | 근거 |
|----|------|--------|------|
| NFR-SCALE-001 | 수평 확장 | 불필요 (MVP) | 단일 매장 운영, 수직 확장으로 충분 |
| NFR-SCALE-002 | 데이터 증가량 | < 1GB/12개월 | 주문 데이터 경량, 이미지 URL만 저장 |
| NFR-SCALE-003 | 테이블 수 상한 | 매장당 50개 | Step 1 가정 |

### 2.4 보안 (Security)

| ID | 지표 | 목표치 | 근거 |
|----|------|--------|------|
| NFR-SEC-001 | 관리자 인증 | JWT (16시간 만료) | 요구사항 명시 |
| NFR-SEC-002 | 비밀번호 저장 | bcrypt 해싱 | 요구사항 명시 |
| NFR-SEC-003 | 민감 데이터 | PII 없음 (고객 개인정보 미수집) | 고객 로그인 = 테이블 인증, 개인정보 불필요 |
| NFR-SEC-004 | 규제 준수 | 해당 없음 (MVP) | PII 미수집으로 GDPR 등 비대상 |
| NFR-SEC-005 | API 보안 | HTTPS, CORS 제한, 입력 검증 | 기본 웹 보안 |
| NFR-SEC-006 | 로그인 시도 제한 | 5회 실패 시 5분 잠금 | 요구사항 명시: "로그인 시도 제한" |

### 2.5 유지보수성 (Maintainability)

| ID | 지표 | 목표치 | 근거 |
|----|------|--------|------|
| NFR-MAINT-001 | 코드 테스트 커버리지 | > 80% | 안정적 MVP 운영 |
| NFR-MAINT-002 | API 문서화 | OpenAPI 3.0 스펙 | 프론트-백엔드 협업 효율 |
| NFR-MAINT-003 | 코드 모듈화 | 도메인별 분리 | DDD 기반 유지보수 용이성 |

### 2.6 사용성 (Usability)

| ID | 지표 | 목표치 | 근거 |
|----|------|--------|------|
| NFR-UX-001 | 터치 타겟 크기 | 최소 44x44px | 요구사항 명시 |
| NFR-UX-002 | 고객 주문 완료 시간 | 첫 방문 기준 3분 이내 | 직관적 UI 목표 |
| NFR-UX-003 | 관리자 학습 시간 | 30분 이내 기본 조작 가능 | IT 비전문가 대상 |
| NFR-UX-004 | 브라우저 호환 | Chrome, Safari (최신 2버전) | 태블릿 브라우저 기준 |

---

## 3. SLO/SLI/SLA 명세서

### 3.1 SLO 매트릭스

| 서비스 | SLI (측정 지표) | SLO (내부 목표) | SLA (외부 약속) | 에러 버짓 (월) |
|--------|-----------------|-----------------|-----------------|---------------|
| 주문 API | 가용성 (성공 응답률) | 99.5% | 99.0% | 3.6시간 |
| 주문 API | 응답 시간 (p99) | < 1000ms | < 2000ms | - |
| 메뉴 API | 가용성 | 99.5% | 99.0% | 3.6시간 |
| 메뉴 API | 응답 시간 (p99) | < 500ms | < 1000ms | - |
| SSE 알림 | 전달 지연 시간 | < 2초 | < 5초 | - |
| SSE 알림 | 연결 가용성 | 99.0% | 98.0% | 7.2시간 |
| 인증 서비스 | 가용성 | 99.5% | 99.0% | 3.6시간 |
| 웹 프론트엔드 | FCP (First Contentful Paint) | < 2초 | < 3초 | - |

### 3.2 SLI 측정 방법

| SLI | 측정 방법 | 수집 도구 |
|-----|----------|----------|
| API 가용성 | HTTP 상태 코드 2xx 비율 | 서버 로그 / 헬스체크 |
| API 응답 시간 | 요청~응답 소요 시간 | 서버 미들웨어 로깅 |
| SSE 전달 지연 | 이벤트 발행 → 클라이언트 수신 시간차 | 서버 타임스탬프 비교 |
| FCP | 브라우저 Performance API | Lighthouse / Web Vitals |

### 3.3 에러 버짓 정책

- **에러 버짓 50% 이상 잔여**: 새 기능 개발 정상 진행
- **에러 버짓 20~50% 잔여**: 안정성 개선 작업 병행
- **에러 버짓 소진**: 새 기능 개발 중단, 안정성/성능 개선에 집중

---

## 4. 요구사항 추적성 매트릭스 (RTM)

| 비즈니스 요구 | FR ID | NFR ID | 설계 결정 (예상) | 테스트 종류 |
|--------------|-------|--------|----------------|------------|
| 즉시 주문 (대기 없음) | FR-C-001, FR-C-002 | NFR-PERF-006, NFR-UX-001 | 자동 로그인, 클라이언트 캐시 | 단위, E2E |
| 메뉴 탐색 편의성 | FR-C-002, FR-C-006 | NFR-PERF-001, NFR-UX-002 | 카테고리 필터, 다국어 | 단위, E2E |
| 장바구니 → 주문 | FR-C-003, FR-C-004 | NFR-PERF-002 | 로컬 스토리지, 트랜잭션 | 단위, 통합 |
| 주문 상태 추적 | FR-C-005, FR-A-003 | NFR-PERF-003 | SSE 실시간 업데이트 | 통합, E2E |
| 실시간 운영 | FR-A-002 | NFR-PERF-003, NFR-AVAIL-004 | SSE, 자동 재연결 | 통합, E2E |
| 테이블 격리 | FR-A-005 | NFR-SEC-003 | 세션 ID 기반 격리 | 단위, 통합 |
| 메뉴 관리 | FR-A-007, FR-A-008 | NFR-PERF-001, NFR-MAINT-002 | CRUD API, OpenAPI | 단위, 통합 |
| 안전한 인증 | FR-A-001, FR-C-001 | NFR-SEC-001~006 | JWT, bcrypt, Rate Limit | 단위, 통합, 보안 |
| 과거 이력 | FR-A-006 | NFR-SCALE-002 | 아카이빙, 날짜 필터 | 단위, 통합 |

---

## 5. 핵심 질문 체크리스트

- [x] 모든 Must Have 기능이 명확한 인수 조건을 가지는가? → 14개 Must Have 기능 모두 AC 정의 완료
- [x] NFR이 구체적인 수치로 정량화되었는가? → "빨라야 한다" ❌ → "p99 < 500ms" ✅
- [x] SLO가 비즈니스 요구사항과 일치하는가? → 단일 매장 MVP 수준에 맞게 99.5% 설정
- [x] 에러 버짓 정책이 정의되었는가? → 3단계 정책 수립
- [x] 규제 준수 요구사항이 누락되지 않았는가? → PII 미수집으로 특별 규제 비대상 확인
- [x] Won't Have 항목이 명확히 정의되었는가? → constraints.md 기반 7개 카테고리 제외 확인

---

## 6. 다음 단계

이 산출물은 다음 단계들의 입력으로 전달됩니다:
- **기능 명세서 (FR)** → Step 4 (하이레벨 아키텍처), Step 7 (API 설계)
- **NFR 리포트** → Step 5 (기술 스택), Step 9 (인프라), Step 11 (SRE)
- **SLO 명세서** → Step 11 (가시성/운영)
- **RTM** → Step 12 (최종 블루프린트)
