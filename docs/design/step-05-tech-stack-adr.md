# Step 5: 기술 스택 선정 및 트레이드오프 (ADR)

> 방법론: Architecture Decision Record (ADR)
> 상태: 완료

---

## 1. 기술 요구사항 매핑

| 카테고리 | 요구사항 (NFR/아키텍처) | 기술 제약 |
|----------|----------------------|----------|
| 프론트엔드 | 태블릿 브라우저 SPA, 터치 친화적, FCP < 2초 | React 생태계, SPA 프레임워크 |
| 백엔드 | REST API + SSE, JWT 인증, 50 CCU/매장 | 비동기 I/O, SSE 네이티브 지원 |
| 데이터베이스 | ACID, 관계형, 주문/세션 트랜잭션 | 관계형 DB, 트랜잭션 지원 |
| 인프라 | 단일 인스턴스 MVP, 99.5% SLO | AWS 기반, 컨테이너 배포 |

---

## 2. ADR 목록

### ADR-001: 프론트엔드 프레임워크 — React + Vite

#### 상태
수락됨

#### 날짜
2026-02-09

#### 맥락 (Context)
고객용/관리자용 2개의 SPA가 필요하다. SEO는 불필요 (태블릿 전용, 검색 엔진 노출 불필요). 빠른 개발 속도와 태블릿 터치 친화적 UI가 필요하다.

#### 결정 (Decision)
**React 19 + Vite** 를 프론트엔드 프레임워크로 선정한다.

#### 고려한 대안

**대안 1: Next.js**
- 장점: SSR/SSG, 풍부한 생태계, 파일 기반 라우팅
- 단점: SSR 불필요 (SEO 비대상), 서버 인프라 추가 필요, 오버엔지니어링
- 불채택 사유: 태블릿 전용 앱에 SSR은 불필요한 복잡성

**대안 2: Vue.js + Vite**
- 장점: 학습 곡선 완만, 가볍고 빠름
- 단점: React 대비 생태계 규모 작음, 채용 시장 제한적
- 불채택 사유: React 생태계의 풍부한 UI 컴포넌트 라이브러리 활용

#### 트레이드오프
- **긍정적**: 가장 큰 생태계, 채용 용이, 빠른 빌드 (Vite), SSR 오버헤드 없음
- **부정적**: CSR만 지원 (SEO 제한) — 수용 (SEO 불필요)

---

### ADR-002: 상태 관리 — Zustand

#### 상태
수락됨

#### 날짜
2026-02-09

#### 맥락 (Context)
장바구니(로컬), 인증 토큰, SSE 이벤트 등 클라이언트 상태 관리가 필요하다. 복잡한 서버 상태 동기화는 불필요하다.

#### 결정 (Decision)
**Zustand** 를 전역 상태 관리 라이브러리로 선정한다.

#### 고려한 대안

**대안 1: Redux Toolkit**
- 장점: 성숙, 미들웨어 생태계, DevTools
- 단점: 보일러플레이트 다수, 소규모 앱에 과도
- 불채택 사유: 상태 구조가 단순하여 Redux 복잡성 불필요

**대안 2: React Context + useReducer**
- 장점: 추가 라이브러리 없음
- 단점: 리렌더링 최적화 어려움, 구조화 한계
- 불채택 사유: 성능 최적화 및 미들웨어 필요

#### 트레이드오프
- **긍정적**: 최소 보일러플레이트, 직관적 API, 번들 크기 작음, persist 미들웨어 (장바구니 로컬 저장)
- **부정적**: DevTools 기능이 Redux 대비 제한적 — 수용 (규모 작음)

---

### ADR-003: 백엔드 런타임/프레임워크 — Node.js + Express

#### 상태
수락됨

#### 날짜
2026-02-09

#### 맥락 (Context)
REST API + SSE를 제공하는 모놀리스 API 서버가 필요하다. 프론트엔드와 동일 언어(JavaScript/TypeScript) 사용으로 풀스택 개발 효율을 높이려 한다.

#### 결정 (Decision)
**Node.js 20 LTS + Express 5 + TypeScript** 를 백엔드 기술로 선정한다.

#### 고려한 대안

**대안 1: Fastify**
- 장점: Express 대비 높은 성능, 스키마 기반 검증
- 단점: 커뮤니티/미들웨어 생태계 Express 대비 작음
- 불채택 사유: 50 CCU 수준에서 성능 차이 무의미, Express 생태계 활용

**대안 2: NestJS**
- 장점: 구조화된 아키텍처, DI 내장, TypeScript 최적화
- 단점: 학습 곡선 높음, 소규모 MVP에 과도한 추상화
- 불채택 사유: MVP 규모에 오버엔지니어링

#### 트레이드오프
- **긍정적**: 최대 생태계, 검증된 안정성, SSE 네이티브 지원, 풀스택 TypeScript
- **부정적**: 구조화 강제 없음 (개발자 규율 필요) — 도메인별 디렉토리 구조로 완화

---

### ADR-004: ORM — Drizzle ORM

#### 상태
수락됨

#### 날짜
2026-02-09

#### 맥락 (Context)
PostgreSQL과의 데이터 접근 계층이 필요하다. 타입 안전성과 마이그레이션 관리가 중요하다.

#### 결정 (Decision)
**Drizzle ORM** 을 데이터 접근 계층으로 선정한다.

#### 고려한 대안

**대안 1: Prisma**
- 장점: 직관적 스키마 DSL, 자동 타입 생성, 마이그레이션
- 단점: 쿼리 엔진 추가 프로세스, 복잡 쿼리 제한, 번들 크기
- 불채택 사유: SSE 환경에서 커넥션 관리 오버헤드

**대안 2: TypeORM**
- 장점: Active Record + Data Mapper 패턴 지원
- 단점: 타입 안전성 약함, 유지보수 둔화
- 불채택 사유: 타입 안전성 부족, 활발하지 않은 유지보수

#### 트레이드오프
- **긍정적**: SQL-like API (학습 곡선 낮음), 완전한 타입 안전성, 경량, 마이그레이션 내장
- **부정적**: Prisma 대비 생태계 작음 — 수용 (필요 기능 충족)

---

### ADR-005: 데이터베이스 — PostgreSQL

#### 상태
수락됨

#### 날짜
2026-02-09

#### 맥락 (Context)
주문, 메뉴, 세션 데이터의 ACID 트랜잭션이 필수이다. 관계형 데이터 모델이 도메인에 적합하다.

#### 결정 (Decision)
**PostgreSQL 16** 을 주 데이터베이스로 선정한다.

#### 고려한 대안

**대안 1: MySQL**
- 장점: 가벼움, 널리 사용됨
- 단점: JSON 지원 약함, Window Functions 제한
- 불채택 사유: PostgreSQL의 우수한 JSON 지원과 확장성

**대안 2: SQLite**
- 장점: 서버리스, 제로 설정
- 단점: 동시 쓰기 제한, 네트워크 접근 불가
- 불채택 사유: SSE + 다수 클라이언트 동시 쓰기에 부적합

#### 트레이드오프
- **긍정적**: 완전한 ACID, 우수한 JSON 지원, SSE LISTEN/NOTIFY (실시간 트리거 가능), 무료
- **부정적**: MySQL 대비 약간 높은 메모리 사용 — 수용 (단일 인스턴스 충분)

---

### ADR-006: UI 컴포넌트 — Tailwind CSS + shadcn/ui

#### 상태
수락됨

#### 날짜
2026-02-09

#### 맥락 (Context)
고객용(터치 친화적 카드 UI)과 관리자용(데이터 테이블, 대시보드) 두 가지 UI가 필요하다. 빠른 프로토타이핑과 일관된 디자인 시스템이 중요하다.

#### 결정 (Decision)
**Tailwind CSS 4 + shadcn/ui** 를 스타일링 및 UI 컴포넌트로 선정한다.

#### 트레이드오프
- **긍정적**: 유틸리티 우선 CSS, 복사-붙이기 방식(vendor lock-in 없음), 접근성 내장, 커스터마이징 용이
- **부정적**: 초기 HTML 가독성 저하 — 컴포넌트 추출로 완화

---

## 3. 확정 기술 스택 명세서

### 프론트엔드
| 기술 | 버전 | 용도 | ADR |
|------|------|------|-----|
| React | 19 | 메인 UI 프레임워크 | ADR-001 |
| Vite | 6 | 빌드 도구 | ADR-001 |
| TypeScript | 5.x | 타입 안전성 | - |
| Zustand | 5 | 전역 상태 관리 | ADR-002 |
| Tailwind CSS | 4 | 스타일링 | ADR-006 |
| shadcn/ui | latest | UI 컴포넌트 | ADR-006 |
| React Router | 7 | 클라이언트 라우팅 | - |
| Zod | 3 | 입력 검증 | - |

### 백엔드
| 기술 | 버전 | 용도 | ADR |
|------|------|------|-----|
| Node.js | 20 LTS | 런타임 | ADR-003 |
| Express | 5 | HTTP 프레임워크 | ADR-003 |
| TypeScript | 5.x | 타입 안전성 | - |
| Drizzle ORM | latest | 데이터 접근 | ADR-004 |
| Zod | 3 | 입력 검증 | - |
| jsonwebtoken | latest | JWT 인증 | - |
| bcrypt | latest | 비밀번호 해싱 | - |
| helmet | latest | HTTP 보안 헤더 | - |
| cors | latest | CORS 설정 | - |

### 데이터 저장소
| 기술 | 버전 | 용도 | ADR |
|------|------|------|-----|
| PostgreSQL | 16 | 주 데이터베이스 | ADR-005 |

### 인프라 & DevOps
| 기술 | 버전 | 용도 | ADR |
|------|------|------|-----|
| AWS | - | 클라우드 플랫폼 | - |
| Docker | latest | 컨테이너 패키징 | - |
| GitHub Actions | - | CI/CD | - |

### 테스트
| 기술 | 버전 | 용도 |
|------|------|------|
| Vitest | latest | 단위/통합 테스트 |
| Playwright | latest | E2E 테스트 |
| Supertest | latest | API 통합 테스트 |

---

## 4. 기술 리스크 매트릭스

| 리스크 | 확률 | 영향 | 완화 방안 | 대체 기술 |
|--------|------|------|----------|----------|
| Express 5 생태계 미성숙 | 낮음 | 중간 | Express 4로 폴백 가능 | Fastify |
| Drizzle ORM 브레이킹 체인지 | 중간 | 낮음 | 버전 고정, 마이그레이션 테스트 | Prisma |
| SSE 프록시 호환성 | 낮음 | 높음 | 직접 연결 또는 Long Polling 폴백 | WebSocket |
| PostgreSQL LISTEN/NOTIFY 한계 | 낮음 | 중간 | 인메모리 이벤트 버스 사용 | Redis Pub/Sub |

---

## 5. 핵심 질문 체크리스트

- [x] 모든 기술 선택에 ADR이 작성되었는가? → 6개 ADR 작성 완료
- [x] 팀의 현재 역량이 선택한 기술과 부합하는가? → JavaScript/TypeScript 풀스택, 학습 곡선 최소화
- [x] Lock-in 리스크가 평가되었는가? → 모든 기술이 오픈소스, 대체 가능
- [x] 라이선스 호환성이 확인되었는가? → MIT/Apache 2.0 호환
- [x] 기술 간 통합 호환성이 검증되었는가? → TypeScript 단일 언어, Drizzle-PostgreSQL, React-Vite 검증됨

---

## 6. 다음 단계

이 산출물은 다음 단계들의 입력으로 전달됩니다:
- **기술 스택 명세서** → Step 6 (데이터 모델링 도구: Drizzle + PostgreSQL)
- **ADR** → Step 8 (디자인 패턴 선택 근거)
- **인프라 기술** → Step 9 (AWS 인프라 전략)
